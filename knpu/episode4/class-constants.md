# Class Constants

Well hey guys. Welcome back for part four of our Object Oriented Programming series. You guys are already really dangerous at this point. In this course we're going to have some fun and talk about a lot of the little features that we haven't mentioned yet. This is going to cross you over that final gap that will allow you to recognize all of the different object oriented things that you see in other people's code. There's lots to get through. Let's not delay. Let's get started.

As always you should code along with me. The best way to do that is to download the source code from this page on Zip It and move into the start directory. When you do that, you'll have the same code that I have here. You should also have a readme file in there. If you check that out, it will tell you instructions on how to get things setup.

When you finally do have things setup, I want you to open your favorite terminal application, move into the directory, and like we've done in the previous courses we're going to start the built in php web server by running php-S localhost: 8000. That's just a really good server to use for development. Then in our browser we can go to localhost: 8000 and here is our beautiful Battles application.

We're going to start by adding a brand new feature. In index.php, near the bottom, right after we choose our ships but before we hit submit, I'm going to paste in a new select box. I'm going to show you what it looks like first. It's a new select box called "Battle Type" with a normal, no Jedi powers, and only Jedi powers. If you look at the code, this is a single select field as a name of battle_type. Then it has these three options on it.

What we're going to do is we're going to allow you to select a normal battle which will be how things work, and have worked, where the two ships battle each other. No Jedi powers which means the ships will have to battle each other to the death and the Jedis can't come and use their special powers. Only Jedi powers where the Jedi's magically use their powers and overcome a stronger ship.

Before we do anything special, we're just going to hook this up in the normal way. We have a battle_type field here, let's go in a battle.php where this submits to. Before we actually call the battle method on the Battle Manager, let's create a new variable called battletype and set that equal to $_POST add on to score type. Then we'll pass battletype as a new fifth argument to the battle function which we'll create in a second. Battletype is being passed as the fifth argument here.

Let's open up Battle Manager and to the battle function we will add the new fifth argument, battletype. Great. Now as you can see this would be one of these strings normal, no Jedi, or only Jedi. Now we just need to hook up the logic. First, these two blocks here should only be run if Jedi powers are being used. We can do an if statement. We can add to the if statement and say if battletype does not equal the no Jedi type, then we can run this. I'm going to copy that and put it down here on the second thing. If normal or only Jedi are executed, then we will totally use these types.

Down here, this is spot where the two ships actually battle each other and bring down their health. If we're in the only Jedi mode, then that shouldn't happen. They should only kill each other by using the modes up here. Let's add another if statement that says if battletype does not equal only Jedi, then go ahead and run these things. Perfect. That takes care of it.

The only other little detail we need to add is we need to make sure that if two ships that have no Jedi powers fight each other with the only Jedi mode, they don't fight forever because this would loop it over forever and ever. I'm going to create a new I variable set to zero. Then just at the bottom of this we'll say if I equals 100, then probably we're stuck in an infinite loop because those two non-Jedi ships are fighting each other, so we'll just set ship one health equal to zero and ship two health equal to zero and below this we'll increment that. That should do it.

Let's give it a try here. We'll select one Jedi Starfighter, one CloakShape fighter, and let's check do only Jedi powers. Hit engage and there we go. The Jedi Starfighter used it's Jedi powers for a stunning victory. If we refreshed every single time, it will use it's Jedi star powers to win.

Perfect. That was easy. What's the problem? The problem is if you look at these strings normal, no Jedi, only Jedi, they're just kind of random strings. Especially in Battle Manager when you see these strings, it's not really clear what other strings you could have. I see no Jedi here, only Jedi down here. What other modes are there? What do these modes mean? When you have kind of magic strings like this, they can become a little bit hard to keep track of in your application because you end up references these exact little strings many, many places in your application and it's difficult to keep things organized.

Object oriented code gives us a really nice way to solve this called "class constants". It works like this. Inside any class, and I'm going to use Battle Manager because these types of battles deal most closely with Battle Manager, you can use a special keyword called "const" followed by a word, which is usually in all upper case, type normal, set to a string. I'm going to repeat this. Const no Jedi for the other two types. Const type only Jedi equals only Jedi. Constants are like variables except they can't be changed, but we can reference them. The names of the constants, like type_normal, those can be anything. I prefixed it with type so that it helps me understand that these are probably battletypes.

As soon as you do this, instead of having this random string, you can say self, because remember ... You can say BattleManager:: and then type no Jedi. Then down here, you do the same thing. BattleManager type no Jedi. Then down here BattleManager only Jedi. That's going to work the exact same way as those strings. In index.php, you do the same thing. Open php echo. BattleManager type normal. We'll copy that and replace it with type no Jedi and type only Jedi. Just to [preview 00:08:58] it still works, let's refresh this page and everything's still happy.

You can see that's the exact same thing as before, we've just given these strings a single home at the top of Battle Manager. If we need to change this string value for some reason, we could do it in this one spot and nothing would break in our application and everything would be happy. This also gives our strings some context. What I mean is we can actually document them now. We could put some documentation above that says this is the normal battle mode don't allow Jedi powers. Above the last one you could say something like you can only use when with Jedi powers.

Then later when another developer, or you in the future, is looking inside index.php, instead of these random strings that don't hold meaning, they go, "Oh, Battle Manager type normal. Let me go look in that class. Oh." Here they are and explained. Constants are just a really nice thing that we inherit. Anytime you have a string of value, or maybe a number value, which is not really meaningful in itself, but will never change, stick it on a constant and you'll be very happy.

